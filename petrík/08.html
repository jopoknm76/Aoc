<script>
  const input=`.....................5...............P............
.............w.....T.........Xh.....5............u
...................kX.......T.......H.P...........
......u.....k...E..............................P..
.....................F.........................o..
...............k........F...................o.....
...............E........x...k..w......S..........a
...................E.......9..x.....P.............
...............................X..................
..............................................X.a.
............A.............w........e...u..........
..T...................9........x....B..........H..
..........Z.....................u.5...........3...
....................d..F.....5...zC..B...S........
...............TfZ..........F.........7S..e.h...o.
....................................3e.........h..
.....A...............f.........Hb....3O...........
..............f..d...............................o
......................................4...........
......g...................H..Z.........C.3.4..e...
............p.....d......................x...h....
...............f.p.....................l.......M..
..................................a............l..
........A.............j..........G................
...N...............9.......r..B.z.....C...........
............................lg......4..........7S.
................K.......Ey.......4.g...........V.7
........N......Av...............................G.
.............b...K...B...................C......V.
...........K...................r.....a............
.................................v...Mg...........
......p.....Z..........jr.....Y........J.....O..7.
.....p....N.....t..........j...O............l.....
.....................L...Ut.....O..v.....V........
.d......D...W......n....j0..................s..G..
.....y........L.........s...0nV.c.M...8...........
...........L.............................J..G.....
...D.................2............J..R............
.......m................L.2.....vU8Rc.............
....................................n..cz..s......
..y....................2.......c..................
............w....0....2....8....1.R.6.............
.............................86...r...........Y...
KN..............m.................U...............
.................t....n.0........1..J..z..........
......D........................1..................
m..................W......R......61...M..........Y
y....................W.b...m...................Y..
.....D....................U............s..........
..............W..6...........tb...................`;
  /* PARSE DATA *****************************************************/
  const grid=[];
  const freqGroups={};
  for(const row of input.split('\n')) {
    grid.push(row.split(''));
  }
  for(let top=0;top<grid.length;top++) {
    for(let left=0;left<grid[top].length;left++) {
      const cell=grid[top][left];
      if(cell===".") {
        continue;
      }
      if(!freqGroups[cell]) {
        freqGroups[cell]=[];
      }
      freqGroups[cell].push({top,left});
    }
  }
  console.log(grid);
  console.log(freqGroups);
  /* PART ONE *****************************************************/
  for(const freqGroup of Object.values(freqGroups)) {
    for(const thisItem of freqGroup) {
      for(const otherItem of freqGroup) {
        const dTop=thisItem.top-otherItem.top;
        const dLeft=thisItem.left-otherItem.left;
        if(dTop===0&&dLeft===0) {continue;}
        const antiNodeLeft=thisItem.left+dLeft;
        const antiNodeTop=thisItem.top+dTop;
        if(grid[antiNodeTop]&&grid[antiNodeTop][antiNodeLeft]/*&&grid[antiNodeTop][antiNodeLeft]==="."*/) {
          grid[antiNodeTop][antiNodeLeft]="#";
        }
      }
    }
  }
  let sum=0;
  for(const row of grid) {
    for(const cell of row) {
      if(cell==="#") {
        ++sum;
      }
    }
  }
  console.log(sum);
  console.log(grid.map(e=>e.join("")).join("\n"));
  
</script>